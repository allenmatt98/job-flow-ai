import{c as v,r as n,j as e,U as y,F as b,B as w,S as C,g as f,s as S,a as P}from"./user-B4KjWHom.js";const A=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],L=v("link",A);const T=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],E=v("loader",T),R=()=>{const[s,c]=n.useState({firstName:"",lastName:"",email:"",phone:"",linkedin:"",portfolio:"",resumeText:"",about:""}),[l,m]=n.useState(!0),[u,o]=n.useState(!1);n.useEffect(()=>{(async()=>{const d=await f();c(x=>({...x,...d})),m(!1)})()},[]);const t=r=>{const{name:d,value:x}=r.target;c(j=>({...j,[d]:x})),o(!1)},h=async r=>{r.preventDefault(),await S(s),o(!0),setTimeout(()=>o(!1),3e3)};return l?e.jsx("div",{children:"Loading..."}):e.jsxs("form",{onSubmit:h,className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"card",children:[e.jsxs("h3",{className:"flex items-center gap-2 mb-2",children:[e.jsx(y,{size:18})," Personal Info"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"label",children:"First Name"}),e.jsx("input",{name:"firstName",value:s.firstName,onChange:t,placeholder:"John"})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"label",children:"Last Name"}),e.jsx("input",{name:"lastName",value:s.lastName,onChange:t,placeholder:"Doe"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"label",children:"Email"}),e.jsx("input",{name:"email",value:s.email,onChange:t,placeholder:"john@example.com"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"label",children:"Phone"}),e.jsx("input",{name:"phone",value:s.phone,onChange:t,placeholder:"+1 234 567 890"})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("h3",{className:"flex items-center gap-2 mb-2",children:[e.jsx(L,{size:18})," Links"]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"LinkedIn URL"}),e.jsx("input",{name:"linkedin",value:s.linkedin,onChange:t,placeholder:"https://linkedin.com/in/..."})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"label",children:"Portfolio URL"}),e.jsx("input",{name:"portfolio",value:s.portfolio,onChange:t,placeholder:"https://johndoe.com"})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("h3",{className:"flex items-center gap-2 mb-2",children:[e.jsx(b,{size:18})," Resume Content"]}),e.jsx("label",{className:"label",children:"Paste your resume text here (for AI context)"}),e.jsx("textarea",{name:"resumeText",value:s.resumeText,onChange:t,rows:10,placeholder:"Paste plain text of your resume..."})]}),e.jsxs("div",{className:"card",children:[e.jsxs("h3",{className:"flex items-center gap-2 mb-2",children:[e.jsx(w,{size:18})," About / Bio"]}),e.jsx("textarea",{name:"about",value:s.about,onChange:t,rows:4,placeholder:"Short bio or summary..."})]}),e.jsxs("button",{type:"submit",className:"btn-primary flex items-center justify-center gap-2",children:[e.jsx(C,{size:18})," ",u?"Saved!":"Save Profile"]})]})},z="http://localhost:3000/api",F=async({jobDescription:s,userProfile:c,type:l})=>(await fetch(`${z}/generate-response`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jobDescription:s,userProfile:c,type:l})})).json();function G(){const[s,c]=n.useState("profile"),[l,m]=n.useState(null),[u,o]=n.useState(!1),[t,h]=n.useState(!1),[r,d]=n.useState(""),x=async()=>{try{const[a]=await chrome.tabs.query({active:!0,currentWindow:!0});if(!a?.id)return;const i=await chrome.tabs.sendMessage(a.id,{action:"SCAN_PAGE"});i&&m(i)}catch(a){console.error("Scan failed:",a),m({count:0,fields:[]})}},j=async()=>{o(!0);try{const[a]=await chrome.tabs.query({active:!0,currentWindow:!0}),i=await f(),p=await chrome.tabs.sendMessage(a.id,{action:"AUTOFILL",profile:i});p&&p.success&&console.log("Filled",p.count)}catch(a){console.error("Autofill failed:",a)}o(!1)},k=async()=>{h(!0),d("");try{const[a]=await chrome.tabs.query({active:!0,currentWindow:!0}),i=await f(),g=(await chrome.tabs.sendMessage(a.id,{action:"GET_PAGE_TEXT"}))?.text||"";if(!g){alert("Could not read page content. Please try again on a job post page."),h(!1);return}const N=await F({jobDescription:g,userProfile:i,type:"coverLetter"});N.response?d(N.response):alert("Generation failed. Ensure the Backend is running and API Key is set in backend/.env")}catch(a){console.error("Generation Error:",a),alert("Error connecting to backend services.")}h(!1)};return e.jsxs("div",{className:"container",style:{padding:"20px",maxWidth:"800px",margin:"0 auto"},children:[e.jsxs("header",{className:"flex items-center justify-between mb-2",children:[e.jsx("h2",{children:"Job Flow AI"}),e.jsx("div",{className:"badge",children:"v1.1.2"})]}),e.jsxs("div",{className:"tabs",children:[e.jsxs("button",{className:`tab flex items-center gap-2 ${s==="profile"?"active":""}`,onClick:()=>c("profile"),children:[e.jsx(y,{size:16})," Profile"]}),e.jsxs("button",{className:`tab flex items-center gap-2 ${s==="job"?"active":""}`,onClick:()=>c("job"),children:[e.jsx(w,{size:16})," Job Context"]})]}),e.jsxs("main",{children:[s==="profile"&&e.jsx(R,{}),s==="job"&&e.jsxs("div",{className:"card",children:[e.jsx("h3",{children:"Job Context"}),e.jsx("p",{className:"label",children:"Scan the current page to extract job details."}),e.jsx("button",{onClick:x,className:"btn-primary mt-4 w-full flex justify-center gap-2",children:"Scan Current Page"}),l&&e.jsxs("div",{className:"mt-4 p-4 border rounded bg-slate-800",children:[e.jsxs("p",{className:"mb-2",children:["Found ",e.jsx("strong",{children:l.count})," fields."]}),e.jsx("ul",{className:"text-xs text-slate-400 mb-4 list-disc pl-4",children:l.fields.map((a,i)=>e.jsxs("li",{children:[a.type," (",a.tagName,")"]},i))}),e.jsx("button",{onClick:j,disabled:u||l.count===0,className:"btn-primary w-full",children:u?"Filling...":"Autofill Fields"})]}),e.jsxs("div",{className:"card mt-4",children:[e.jsxs("h3",{className:"flex items-center gap-2 mb-2",children:[e.jsx(b,{size:18})," AI Assistant"]}),e.jsx("p",{className:"label",children:"Generate tailored content based on this page."}),e.jsxs("button",{onClick:k,disabled:t,className:"btn-secondary w-full mt-2 flex justify-center gap-2",children:[t?e.jsx(E,{className:"animate-spin",size:16}):e.jsx(b,{size:16}),"Generate Cover Letter"]}),r&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"label",children:"Result:"}),e.jsx("textarea",{className:"w-full text-sm font-mono bg-slate-900 border-slate-700",rows:8,readOnly:!0,value:r}),e.jsx("button",{onClick:()=>navigator.clipboard.writeText(r),className:"btn-secondary w-full mt-2 text-xs",children:"Copy to Clipboard"})]})]})]})]})]})}P.createRoot(document.getElementById("root")).render(e.jsx(n.StrictMode,{children:e.jsx(G,{})}));
